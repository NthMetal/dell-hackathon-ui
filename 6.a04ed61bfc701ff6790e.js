(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{kSBl:function(e,t,a){"use strict";a.r(t),a.d(t,"OxygenSupplyModule",function(){return U});var i=a("ofXK"),c=a("tyNb"),n=a("R0Ic"),r=a("M9IT"),o=a("Dh3D"),s=a("+0xr"),l=a("a0Xn"),b=a("6n/F"),d=a("fXoL"),m=a("jr3z"),u=a("Xa2L"),f=a("Wp6s"),h=a("bTqV"),p=a("NFeN");function S(e,t){1&e&&(d.Tb(0,"div",20),d.Tb(1,"div",21),d.Ob(2,"mat-spinner"),d.Sb(),d.Sb())}function w(e,t){if(1&e&&(d.Rb(0),d.Ob(1,"div",23),d.Qb()),2&e){const e=d.ec(2);d.Cb(1),d.kc("chart",e.chart)}}function x(e,t){if(1&e&&(d.Tb(0,"div",3),d.xc(1,w,2,1,"ng-container",22),d.Sb()),2&e){const e=d.ec();d.Cb(1),d.kc("ngIf",e.chart)}}function T(e,t){if(1&e&&(d.Tb(0,"b"),d.yc(1),d.Sb()),2&e){const e=t.$implicit,a=t.last,i=d.ec(2);d.Cb(1),d.Bc(" ",e,"",i.treeFilters.length>1&&!a?", ":""," ")}}function g(e,t){if(1&e){const e=d.Ub();d.Tb(0,"mat-card",24),d.Tb(1,"div",25),d.Tb(2,"div",21),d.yc(3," Currently Filtered By: "),d.xc(4,T,2,2,"b",26),d.Sb(),d.Tb(5,"div",3),d.Tb(6,"button",27),d.ac("click",function(){return d.rc(e),d.ec().removeTreeFilters()}),d.yc(7,"Clear Filters"),d.Sb(),d.Sb(),d.Sb(),d.Sb()}if(2&e){const e=d.ec();d.Cb(4),d.kc("ngForOf",e.treeFilters)}}function C(e,t){1&e&&(d.Tb(0,"th",28),d.yc(1," Date "),d.Sb())}function y(e,t){if(1&e&&(d.Tb(0,"td",29),d.yc(1),d.fc(2,"date"),d.Sb()),2&e){const e=t.$implicit;d.Cb(1),d.Ac(" ",d.hc(2,1,e.date,"MMM dd, yyyy")," ")}}function v(e,t){1&e&&(d.Tb(0,"th",28),d.yc(1," Text "),d.Sb())}function D(e,t){if(1&e&&(d.Tb(0,"td",29),d.yc(1),d.Sb()),2&e){const e=t.$implicit;d.Cb(1),d.Ac(" ",e.text," ")}}function k(e,t){1&e&&(d.Tb(0,"th",28),d.yc(1," Username "),d.Sb())}function F(e,t){if(1&e&&(d.Tb(0,"td",29),d.yc(1),d.Sb()),2&e){const e=t.$implicit;d.Cb(1),d.Ac(" ",e.username," ")}}function O(e,t){1&e&&(d.Tb(0,"th",28),d.yc(1," Location "),d.Sb())}function R(e,t){if(1&e&&(d.Tb(0,"td",29),d.yc(1),d.Sb()),2&e){const e=t.$implicit;d.Cb(1),d.Ac(" ",e.location," ")}}function j(e,t){1&e&&(d.Tb(0,"th",28),d.yc(1," Link "),d.Sb())}function A(e,t){if(1&e&&(d.Tb(0,"td",29),d.Tb(1,"a",30),d.Tb(2,"button",31),d.Tb(3,"mat-icon"),d.yc(4,"link"),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&e){const e=t.$implicit;d.Cb(1),d.kc("href",e.link,d.sc)}}function $(e,t){1&e&&(d.Tb(0,"th",28),d.yc(1," Followers "),d.Sb())}function L(e,t){if(1&e&&(d.Tb(0,"td",29),d.yc(1),d.Sb()),2&e){const e=t.$implicit;d.Cb(1),d.Ac(" ",e.followers," ")}}function M(e,t){if(1&e&&(d.Tb(0,"td",29),d.Tb(1,"div",32),d.Tb(2,"div",33),d.Tb(3,"div",3),d.Tb(4,"b"),d.yc(5,"Time: "),d.Sb(),d.yc(6),d.fc(7,"date"),d.Sb(),d.Tb(8,"div",3),d.Tb(9,"b"),d.yc(10,"Username: "),d.Sb(),d.yc(11),d.Sb(),d.Tb(12,"div",3),d.Tb(13,"b"),d.yc(14,"Location: "),d.Sb(),d.yc(15),d.Sb(),d.Tb(16,"div",3),d.Tb(17,"b"),d.yc(18,"Followers: "),d.Sb(),d.yc(19),d.Sb(),d.Tb(20,"div",3),d.Tb(21,"b"),d.yc(22,"Labels: "),d.Sb(),d.yc(23),d.Sb(),d.Tb(24,"div",21),d.Tb(25,"a",30),d.Tb(26,"button",31),d.Tb(27,"mat-icon"),d.yc(28,"link"),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb(),d.Sb()),2&e){const e=t.$implicit,a=d.ec();d.Db("colspan",a.displayedColumns.length),d.Cb(1),d.kc("@detailExpand",e==a.expandedElement?"expanded":"collapsed"),d.Cb(5),d.Ac("",d.hc(7,8,e.date,"h:mm:ss a z")," "),d.Cb(5),d.Ac("",e.username," "),d.Cb(4),d.Ac("",e.location," "),d.Cb(4),d.Ac("",e.followers," "),d.Cb(4),d.Ac("",e.labels," "),d.Cb(2),d.kc("href",e.link,d.sc)}}function I(e,t){1&e&&d.Ob(0,"tr",34)}function z(e,t){if(1&e){const e=d.Ub();d.Tb(0,"tr",35),d.ac("click",function(){d.rc(e);const a=t.$implicit,i=d.ec();return i.expandedElement=i.expandedElement===a?null:a}),d.Sb()}if(2&e){const e=t.$implicit,a=d.ec();d.Fb("example-expanded-row",a.expandedElement===e)}}function N(e,t){1&e&&d.Ob(0,"tr",36)}const Q=function(){return["expandedDetail"]},_=function(){return[5,10,25,100]},E="No Labels",J=[{path:"",component:(()=>{class e{constructor(e){this.tweetDataService=e,this.dataSource=new s.k([]),this.displayedColumns=["date","text"],this.now=new Date,this.treeFilters=[],this.treeData=[],this.isLoaded=!1}ngOnInit(){this.tweetDataService.loadedSubject.subscribe(e=>{this.isLoaded=e}),this.tweetDataService.getTweetDataSubject().subscribe(e=>{const t=this.mapTweets(e);this.removeTreeFilters(),this.setDataSource(t),this.setTreemapData(t)}),this.tweetDataService.getNewTweetObservable().subscribe(e=>{const t=this.mapTweets(e);console.log("adding tweets: ",t);const a=this.dataSource.data;a.unshift(...t),this.dataSource.data=a,this.chart&&this.updateTreeMapData(t)})}mapTweets(e){return e.map(e=>({date:new Date(e["@timestamp"]),text:e.text,username:e.user?e.user.name:"Missing",location:e.place?`${e.place.name}, ${e.place.country}`:"Missing",link:`http://twitter.com/${e.user.screen_name}/status/${e.id_str}`,followers:+((e.user?e.user.followers_count:"")||0),labels:e.preds_label||[]}))}initChart(){this.chart&&this.chart.destroy(),this.chart=new l.a({chart:{type:"treemap",backgroundColor:"transparent"},credits:{enabled:!1},title:{text:"Untitled"},colorAxis:{minColor:"#FFFFFF",maxColor:Object(b.getOptions)().colors[0]},series:[]})}generateChartSeries(e,t){return e.reduce((e,t)=>{if(0===t.labels.length)return e[0].value=e[0].value+1,e;if("string"==typeof t.labels)try{t.labels=JSON.parse(t.labels.replace(/\'/g,'"'))}catch(a){t.labels="related"===t.labels?[]:[t.labels]}return t.labels.forEach(t=>{const a=e.find(e=>e.name===t);a?a.value=a.value+1:e.push({name:t,value:1,colorValue:e.length+1})}),e},t||[{name:E,value:0,colorValue:1}])}setTreemapData(e){this.initChart();const t=this.generateChartSeries(e);this.treeData=t,this.chart.addSeries({type:"treemap",layoutAlgorithm:"squarified",events:{click:e=>{this.treeFilters.includes(e.point.name)?this.treeFilters=this.treeFilters.filter(t=>t!==e.point.name):this.treeFilters.push(e.point.name),this.dataSource.filter=JSON.stringify(this.treeFilters)}},data:t},!0,!0)}updateTreeMapData(e){const t=this.chart.ref.series[0],a=this.generateChartSeries(e,this.treeData);this.treeData=a,t.setData(a)}setDataSource(e){this.dataSource=new s.k([]),this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator,this.dataSource.filterPredicate=(e,t)=>{if("[]"===t)return!0;const a=JSON.parse(t);return!(!a.includes(E)||0!==e.labels.length)||a.some(t=>e.labels.includes(t))},this.dataSource.data=e}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}removeTreeFilters(){this.treeFilters=[],this.dataSource.filter=JSON.stringify(this.treeFilters)}}return e.\u0275fac=function(t){return new(t||e)(d.Nb(m.a))},e.\u0275cmp=d.Hb({type:e,selectors:[["app-oxygen-supply"]],viewQuery:function(e,t){if(1&e&&(d.Cc(r.a,3),d.Cc(o.a,3)),2&e){let e;d.oc(e=d.bc())&&(t.paginator=e.first),d.oc(e=d.bc())&&(t.sort=e.first)}},decls:33,vars:12,consts:[["class","row",4,"ngIf"],[1,"row","flex-column"],["class","col",4,"ngIf"],[1,"col"],["class","mat-elevation-z5",4,"ngIf"],[1,"col","mt-3"],["mat-table","","matSort","","multiTemplateDataRows","",1,"mat-elevation-z5","w-100",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","text"],["matColumnDef","username"],["matColumnDef","location"],["matColumnDef","link"],["matColumnDef","followers"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-element-row",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[1,"mat-elevation-z5","w-100",3,"pageSizeOptions","pageSize"],[1,"row"],[1,"col-auto"],[4,"ngIf"],[3,"chart"],[1,"mat-elevation-z5"],[1,"row","align-items-baseline"],[4,"ngFor","ngForOf"],["mat-button","",3,"click"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["target","_blank",3,"href"],["mat-icon-button",""],[1,"example-element-detail"],[1,"row","align-items-baseline","w-100"],["mat-header-row",""],["mat-row","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"]],template:function(e,t){1&e&&(d.xc(0,S,3,0,"div",0),d.Tb(1,"div",1),d.xc(2,x,2,1,"div",2),d.Tb(3,"div",3),d.xc(4,g,8,1,"mat-card",4),d.Sb(),d.Tb(5,"div",5),d.Tb(6,"table",6),d.Rb(7,7),d.xc(8,C,2,0,"th",8),d.xc(9,y,3,4,"td",9),d.Qb(),d.Rb(10,10),d.xc(11,v,2,0,"th",8),d.xc(12,D,2,1,"td",9),d.Qb(),d.Rb(13,11),d.xc(14,k,2,0,"th",8),d.xc(15,F,2,1,"td",9),d.Qb(),d.Rb(16,12),d.xc(17,O,2,0,"th",8),d.xc(18,R,2,1,"td",9),d.Qb(),d.Rb(19,13),d.xc(20,j,2,0,"th",8),d.xc(21,A,5,1,"td",9),d.Qb(),d.Rb(22,14),d.xc(23,$,2,0,"th",8),d.xc(24,L,2,1,"td",9),d.Qb(),d.Rb(25,15),d.xc(26,M,29,11,"td",9),d.Qb(),d.xc(27,I,1,0,"tr",16),d.xc(28,z,1,2,"tr",17),d.xc(29,N,1,0,"tr",18),d.Sb(),d.Sb(),d.Tb(30,"div",5),d.Ob(31,"mat-paginator",19),d.Sb(),d.Sb(),d.yc(32)),2&e&&(d.kc("ngIf",!t.isLoaded),d.Cb(2),d.kc("ngIf",t.isLoaded),d.Cb(2),d.kc("ngIf",t.treeFilters.length),d.Cb(2),d.kc("dataSource",t.dataSource),d.Cb(21),d.kc("matHeaderRowDef",t.displayedColumns),d.Cb(1),d.kc("matRowDefColumns",t.displayedColumns),d.Cb(1),d.kc("matRowDefColumns",d.lc(10,Q)),d.Cb(2),d.kc("pageSizeOptions",d.lc(11,_))("pageSize",10),d.Cb(1),d.Ac(" ",t.now.toJSON(),""))},directives:[i.l,s.j,o.a,s.c,s.e,s.b,s.g,s.i,r.a,u.b,l.b,f.a,i.k,h.a,s.d,o.b,s.a,p.a,s.f,s.h],pipes:[i.e],styles:["tr.example-detail-row[_ngcontent-%COMP%]{height:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:#f5f5f5}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}"],data:{animation:[Object(n.m)("detailExpand",[Object(n.j)("collapsed",Object(n.k)({height:"0px",minHeight:"0"})),Object(n.j)("expanded",Object(n.k)({height:"*"})),Object(n.l)("expanded <=> collapsed",Object(n.e)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Lb({type:e}),e.\u0275inj=d.Kb({imports:[[c.b.forChild(J)],c.b]}),e})();var P=a("vvyD");let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Lb({type:e}),e.\u0275inj=d.Kb({imports:[[i.c,l.c,H,P.a]]}),e})()}}]);